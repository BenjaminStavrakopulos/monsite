<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monsite - Belleza y Cuidado Capilar</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/products.css">
</head>
<body>
    <!-- Header Navigation -->
    <header class="header">
        <div class="logo-container">
            <img src="images/logo.jpg" alt="Monsite Logo" class="logo">
        </div>
        
        <!-- Men√∫ desktop (visible en pantallas grandes) -->
        <nav class="nav">
            <a href="#hero" class="nav-link">Inicio</a>
            <a href="products.html" class="nav-link">Productos</a>
            <a href="#nosotros" class="nav-link">Nosotros</a>
        </nav>
        
        <!-- Bot√≥n hamburguesa (visible en m√≥viles) -->
        <button class="menu-toggle" id="menuToggle">
            <span></span>
            <span></span>
            <span></span>
        </button>

        <div class="user-actions">
            <button id="loginBtn" class="login-btn">Iniciar Sesi√≥n</button>
            <div class="cart-icon" id="cartIcon">
                üõí <span class="cart-count">0</span>
            </div>
        </div>
    </header>

    <!-- Men√∫ m√≥vil (oculto por defecto) -->
    <nav class="mobile-nav" id="mobileNav">
        <div class="mobile-nav-header">
            <img src="images/logo.jpg" alt="Logo" class="mobile-nav-logo">
            <span class="mobile-nav-title">Men√∫</span>
            <button class="mobile-close" id="mobileClose">√ó</button>
        </div>
        
        <!-- LOS MISMOS ENLACES QUE TU HEADER -->
        <a href="#hero" class="nav-link">Inicio</a>
        <a href="#productos-section" class="nav-link">Productos</a>
        <a href="#nosotros" class="nav-link">Nosotros</a>
    </nav>

    <!-- Overlay para cerrar men√∫ -->
    <div class="mobile-overlay" id="mobileOverlay"></div>

    <!-- Hero Section Mejorada -->
    <section class="hero-improved" id="hero">
        <div class="container">
            <div class="hero-content-improved">
                <h1 class="hero-title-improved">
                    üí´ Descubre tu <span class="highlight">belleza √∫nica</span>
                </h1>
                <p class="hero-subtitle-improved">
                    Productos profesionales para el cuidado capilar. 
                    Transformamos tu rutina de belleza con ingredientes de calidad.
                </p>
                <div class="hero-actions">
                    <a href="#productos-section" class="btn-primary-large">Ver Productos</a>
                    <a href="#nosotros" class="btn-secondary-large">Con√≥cenos</a>
                </div>
                <div class="hero-features">
                    <div class="feature-mini">
                        <span class="feature-icon">üöö</span>
                        <span>Env√≠o r√°pido</span>
                    </div>
                    <div class="feature-mini">
                        <span class="feature-icon">üíé</span>
                        <span>Calidad premium</span>
                    </div>
                    <div class="feature-mini">
                        <span class="feature-icon">üíù</span>
                        <span>Asesor√≠a personalizada</span>
                    </div>
                </div>
            </div>
            <div class="hero-visual-improved">
                <div class="brands-carousel-section">
                    <h3 class="brands-title">Marcas Destacadas</h3>
                    <p class="brands-subtitle">Haz clic en cualquier logo para filtrar productos</p>
                    
                    <div class="brands-carousel-container">
                        <div class="brands-track" id="brandsTrack">
                            <!-- Los logos de marcas se cargan din√°micamente -->
                        </div>
                        <button class="brands-btn brands-prev" id="brandsPrev">‚Äπ</button>
                        <button class="brands-btn brands-next" id="brandsNext">‚Ä∫</button>
                    </div>
                    
                    <div class="active-filter" id="activeFilter">
                        <!-- Se muestra cuando hay un filtro activo -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Featured Products Carousel -->
    <section class="featured-carousel" id="destacados">
        <div class="container">
            <div class="carousel-header">
                <h2 class="section-title-improved">Productos Destacados</h2>
                <p class="section-subtitle">Lo m√°s vendido y recomendado</p>
            </div>
            <div class="carousel-container">
                <div class="carousel-track" id="featuredCarousel">
                    <!-- Los productos destacados se cargan din√°micamente aqu√≠ -->
                </div>
                <button class="carousel-btn carousel-prev" id="carouselPrev">‚Äπ</button>
                <button class="carousel-btn carousel-next" id="carouselNext">‚Ä∫</button>
            </div>
        </div>
    </section>

    <!-- Categories Section -->
    <section class="categories-section">
        <div class="container">
            <h2 class="section-title-improved">Nuestras Categor√≠as</h2>
            <p class="section-subtitle">Encuentra lo que necesitas para tu cuidado capilar</p>
            <div class="categories-grid" id="categoriesGrid">
                <!-- Categor√≠as se cargan din√°micamente -->
            </div>
        </div>
    </section>

    <!-- Products Section -->
    <section class="products-section" id="productos-section">
        <div class="container">
            <h2 class="section-title-improved">Todos los Productos</h2>
            <p class="section-subtitle">Descubre nuestra completa l√≠nea de belleza</p>
            <div class="view-all">
                <a href="products.html" class="view-all-btn">Ver Todos los Productos ‚Üí</a>
            </div>
            <div class="products-grid" id="productsGrid">
                <!-- Los productos se cargan din√°micamente con JS -->
            </div>
        </div>
    </section>

    <!-- About Section Mejorada -->
    <section class="about-improved" id="nosotros">
        <div class="container">
            <div class="about-header">
                <h2 class="section-title-improved">Sobre Monsite</h2>
                <p class="section-subtitle">Tu peluquer√≠a de confianza en Vitacura</p>
            </div>
            
            <div class="about-grid">
                <div class="about-card">
                    <div class="about-card-icon">üíá‚Äç‚ôÄÔ∏è</div>
                    <h3>Expertos en Belleza</h3>
                    <p>Especialistas en cuidado capilar y tratamientos profesionales para realzar tu belleza natural.</p>
                </div>
                
                <div class="about-card">
                    <div class="about-card-icon">üìç</div>
                    <h3>Ubicaci√≥n Privilegiada</h3>
                    <p>Encu√©ntranos en Vitacura 9540, donde la calidad y el servicio se encuentran.</p>
                </div>
                
                <div class="about-card">
                    <div class="about-card-icon">üöö</div>
                    <h3>Delivery Express</h3>
                    <p>Recibe tus productos favoritos con Rappi, Uber Eats y Mercado Libre.</p>
                </div>
            </div>
            
            <div class="about-cta-improved">
                <div class="cta-content">
                    <h3>¬øLista para transformar tu rutina de belleza?</h3>
                    <p>S√≠guenos y descubre tips exclusivos</p>
                    <div class="social-buttons">
                        <a href="https://www.instagram.com/monsitechile" class="btn-instagram" target="_blank">
                            <span class="social-icon">üì∏</span>
                            @monsitechile
                        </a>
                        <a href="https://linktr.ee/Monsitechile" class="btn-linktree" target="_blank">
                            <span class="social-icon">üåê</span>
                            Todos nuestros enlaces
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer Mejorado -->
    <footer class="footer-improved">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <div class="footer-logo-container">
                        <img src="images/logo.jpg" alt="Monsite" class="footer-logo">
                    </div>
                    <p class="footer-tagline">
                        Belleza, cosm√©tica y cuidado personal. Todo lo que necesitas para el cuidado capilar.
                    </p>
                    <div class="footer-social">
                        <a href="https://www.instagram.com/monsitechile" class="social-link-footer" target="_blank">
                            Instagram
                        </a>
                        <a href="https://linktr.ee/Monsitechile" class="social-link-footer" target="_blank">
                            Linktree
                        </a>
                    </div>
                </div>
                
                <div class="footer-info">
                    <div class="footer-column">
                        <h4>Contacto</h4>
                        <div class="contact-info-footer">
                            <p>üìç Vitacura 9540, Santiago</p>
                            <p>üì± @monsitechile</p>
                            <p>üõí Rappi | Uber Eats | Mercado Libre</p>
                        </div>
                    </div>
                    
                    <div class="footer-column">
                        <h4>Horarios</h4>
                        <div class="schedule-info">
                            <p>Lunes a Viernes: 9:00 - 20:00</p>
                            <p>S√°bados: 10:00 - 18:00</p>
                            <p>Domingos: Cerrado</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2024 Monsite. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- Cart Sidebar -->
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h3>Tu Carrito de Compras</h3>
            <button id="closeCart" class="close-cart">√ó</button>
        </div>
        <div class="cart-items" id="cartItems">
            <!-- Items del carrito se cargan din√°micamente -->
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Total:</span>
                <span>$<span id="cartTotal">0.00</span></span>
            </div>
            <button class="checkout-btn">Proceder al Pago</button>
        </div>
    </div>
    <div class="cart-overlay" id="cartOverlay"></div>

    <!-- Modal de Detalles de Producto -->
    <div class="product-modal" id="productModal">
        <div class="modal-overlay" id="modalOverlay"></div>
        <div class="modal-content">
            <button class="modal-close" id="modalClose">√ó</button>
            
            <div class="product-modal-content">
                <!-- Imagen del producto -->
                <div class="modal-product-image">
                    <img id="modalProductImage" src="" alt="">
                    <div class="modal-image-placeholder" id="modalImagePlaceholder">
                        <span class="placeholder-emoji">üõçÔ∏è</span>
                        <span>Imagen no disponible</span>
                    </div>
                </div>
                
                <!-- Informaci√≥n del producto -->
                <div class="modal-product-info">
                    <div class="modal-header">
                        <h2 id="modalProductName">Nombre del Producto</h2>
                        <div class="modal-price" id="modalProductPrice">$0.00</div>
                    </div>
                    
                    <div class="modal-category" id="modalProductCategory">Categor√≠a</div>
                    
                    <div class="modal-section">
                        <h3>üìã Descripci√≥n</h3>
                        <p id="modalProductDescription">Descripci√≥n del producto...</p>
                    </div>
                    
                    <div class="modal-section" id="modalIngredientsSection">
                        <h3>üß™ Ingredientes Principales</h3>
                        <p id="modalProductIngredients">Ingredientes no especificados</p>
                    </div>
                    
                    <div class="modal-section" id="modalUsageSection">
                        <h3>‚ö° Modo de Uso</h3>
                        <p id="modalProductUsage">Instrucciones no especificadas</p>
                    </div>
                    
                    <div class="modal-section">
                        <h3>üìä Especificaciones</h3>
                        <div class="specs-grid">
                            <div class="spec-item">
                                <span class="spec-label">SKU:</span>
                                <span id="modalProductSKU">N/A</span>
                            </div>
                            <div class="spec-item">
                                <span class="spec-label">Stock:</span>
                                <span id="modalProductStock">0</span>
                            </div>
                            <div class="spec-item">
                                <span class="spec-label">Peso/Cantidad:</span>
                                <span id="modalProductQuantity">N/A</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="modal-actions">
                        <button class="add-to-cart-modal" id="modalAddToCart">
                            Agregar al Carrito
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
    <script src="js/menu.js"></script>
    
    <script>
    // ==================== SISTEMA DE FILTRADO POR MARCAS ====================
    
    // Datos de ejemplo de marcas (debes reemplazar con tus marcas reales)
    const brandsData = [
        { id: 'olaplex', name: 'Olaplex', logo: 'images/brands/olaplex.jpg' },
        { id: 'kerastase', name: 'K√©rastase', logo: 'images/brands/kerastase.jpg' },
        { id: 'loreal', name: 'L\'Or√©al', logo: 'images/brands/loreal.jpg' },
        { id: 'wella', name: 'Wella', logo: 'images/brands/wella.jpg' },
        { id: 'schwarzkopf', name: 'Schwarzkopf', logo: 'images/brands/schwarzkopf.jpg' },
        { id: 'redken', name: 'Redken', logo: 'images/brands/redken.jpg' },
        { id: 'matrix', name: 'Matrix', logo: 'images/brands/matrix.jpg' },
        { id: 'paul_mitchell', name: 'Paul Mitchell', logo: 'images/brands/paul-mitchell.jpg' }
    ];

    let currentBrandFilter = null;

    // Funci√≥n para cargar el carrusel de marcas
    function loadBrandsCarousel() {
        const brandsTrack = document.getElementById('brandsTrack');
        brandsTrack.innerHTML = ''; // Limpiar antes de cargar
        
        brandsData.forEach(brand => {
            const brandItem = document.createElement('div');
            brandItem.className = 'brand-logo-item';
            brandItem.dataset.brandId = brand.id;
            brandItem.dataset.brandName = brand.name;
            
            brandItem.innerHTML = `
                ${brand.logo ? 
                    `<img src="${brand.logo}" alt="${brand.name}" class="brand-logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">` :
                    ''
                }
                <div class="brand-logo-placeholder" ${brand.logo ? 'style="display:none;"' : ''}>
                    ${brand.name.substring(0, 3)}
                </div>
                <span class="brand-name">${brand.name}</span>
            `;
            
            brandItem.addEventListener('click', () => filterByBrand(brand.id, brand.name));
            brandsTrack.appendChild(brandItem);
        });
        
        // Configurar navegaci√≥n del carrusel
        setupBrandsCarousel();
    }

    // Funci√≥n para filtrar por marca
    function filterByBrand(brandId, brandName) {
        currentBrandFilter = brandId;
        
        // Actualizar UI
        updateBrandsCarouselUI(brandId);
        showActiveFilter(brandName);
        
        // Filtrar productos
        filterProductsByBrand(brandId);
        
        // Scroll a la secci√≥n de productos
        setTimeout(() => {
            document.getElementById('productos-section').scrollIntoView({ 
                behavior: 'smooth' 
            });
        }, 300);
    }

    // Funci√≥n para filtrar productos por marca
    function filterProductsByBrand(brandId) {
        if (!window.productsData) {
            console.log('‚ùå productsData no disponible');
            return;
        }
        
        console.log('üîç Filtrando productos por marca:', brandId);
        
        const filteredProducts = window.productsData.filter(product => {
            // Buscar en brand, name, category o description
            const searchText = [
                product.brand,
                product.name, 
                product.category,
                product.description
            ].join(' ').toLowerCase();
            
            return searchText.includes(brandId.toLowerCase());
        });
        
        console.log('üì¶ Productos filtrados:', filteredProducts.length);
        
        // Actualizar la grid de productos
        const productsGrid = document.getElementById('productsGrid');
        productsGrid.innerHTML = '';
        
        if (filteredProducts.length > 0) {
            filteredProducts.forEach(product => {
                // Usar la funci√≥n createProductCard de app.js si existe
                if (window.createProductCard) {
                    const productCard = window.createProductCard(product);
                    productsGrid.appendChild(productCard);
                } else {
                    // Fallback si no existe la funci√≥n
                    const productCard = createProductCardFallback(product);
                    productsGrid.appendChild(productCard);
                }
            });
        } else {
            productsGrid.innerHTML = `
                <div class="no-products" style="grid-column: 1 / -1; text-align: center; padding: 3rem; color: var(--accent-gray);">
                    <p>No hay productos de ${brandId} disponibles.</p>
                    <button class="clear-filter" onclick="clearBrandFilter()" style="margin-top: 1rem;">
                        Mostrar todos los productos
                    </button>
                </div>
            `;
        }
    }

    // Funci√≥n de respaldo para crear cards de productos
    function createProductCardFallback(product) {
        const card = document.createElement('div');
        card.className = 'product-card';
        card.innerHTML = `
            <div class="product-image">
                ${product.image ? 
                    `<img src="${product.image}" alt="${product.name}" class="product-real-image">` :
                    `<div class="image-placeholder">
                        <span class="product-emoji">üß¥</span>
                        <span class="product-text">${product.name}</span>
                    </div>`
                }
            </div>
            <div class="product-info">
                <h3>${product.name}</h3>
                <div class="product-price">${formatCLP ? formatCLP(product.price) : '$' + product.price}</div>
                <p class="product-desc">${product.description || 'Producto de calidad profesional'}</p>
                <button class="add-to-cart" onclick="addToCart(${JSON.stringify(product).replace(/"/g, '&quot;')})">
                    Agregar al Carrito
                </button>
            </div>
        `;
        
        // Agregar evento para abrir modal
        card.addEventListener('click', (e) => {
            if (!e.target.classList.contains('add-to-cart')) {
                openProductModal(product.id);
            }
        });
        
        return card;
    }

    // Funci√≥n para actualizar la UI del carrusel
    function updateBrandsCarouselUI(activeBrandId) {
        const brandItems = document.querySelectorAll('.brand-logo-item');
        
        brandItems.forEach(item => {
            if (item.dataset.brandId === activeBrandId) {
                item.classList.add('active');
            } else {
                item.classList.remove('active');
            }
        });
    }

    // Funci√≥n para mostrar el filtro activo
    function showActiveFilter(brandName) {
        const activeFilter = document.getElementById('activeFilter');
        activeFilter.innerHTML = `
            <div class="filter-info">
                <span>Filtrando por: <strong>${brandName}</strong></span>
                <button class="clear-filter" onclick="clearBrandFilter()">
                    Limpiar filtro
                </button>
            </div>
        `;
        activeFilter.classList.add('show');
    }

    // Funci√≥n para limpiar el filtro
    function clearBrandFilter() {
        currentBrandFilter = null;
        
        // Actualizar UI
        const brandItems = document.querySelectorAll('.brand-logo-item');
        brandItems.forEach(item => item.classList.remove('active'));
        
        const activeFilter = document.getElementById('activeFilter');
        activeFilter.classList.remove('show');
        
        // Recargar productos originales
        if (window.loadProducts) {
            window.loadProducts();
        } else {
            // Recargar la p√°gina si no hay funci√≥n loadProducts
            location.reload();
        }
    }

    // Configurar navegaci√≥n del carrusel
    function setupBrandsCarousel() {
        const track = document.getElementById('brandsTrack');
        const prevBtn = document.getElementById('brandsPrev');
        const nextBtn = document.getElementById('brandsNext');
        const brandItems = document.querySelectorAll('.brand-logo-item');
        
        if (brandItems.length === 0) return;
        
        let currentPosition = 0;
        const itemWidth = 95; // 80px + 15px gap
        const visibleItems = 4;
        
        function updateCarousel() {
            track.style.transform = `translateX(-${currentPosition * itemWidth}px)`;
        }
        
        nextBtn.addEventListener('click', () => {
            if (currentPosition < brandItems.length - visibleItems) {
                currentPosition++;
                updateCarousel();
            }
        });
        
        prevBtn.addEventListener('click', () => {
            if (currentPosition > 0) {
                currentPosition--;
                updateCarousel();
            }
        });
    }

    // ==================== INTEGRACI√ìN CON EL SISTEMA EXISTENTE ====================

    // Hacer funciones globales para que puedan ser llamadas desde otros scripts
    window.filterByBrand = filterByBrand;
    window.clearBrandFilter = clearBrandFilter;
    window.loadBrandsCarousel = loadBrandsCarousel;

    // Cargar el carrusel cuando la p√°gina est√© lista
    document.addEventListener('DOMContentLoaded', function() {
        loadBrandsCarousel();
        console.log('‚úÖ Carrusel de marcas cargado');
        
        // Esperar a que se carguen los productos y luego aplicar filtro si hay uno activo
        setTimeout(() => {
            if (currentBrandFilter && window.productsData) {
                const brand = brandsData.find(b => b.id === currentBrandFilter);
                if (brand) {
                    filterByBrand(brand.id, brand.name);
                }
            }
        }, 1000);
    });

    // ==================== MODAL DE PRODUCTO ====================
    // ... (tu c√≥digo existente del modal se mantiene igual)
    </script>
</body>
</html>