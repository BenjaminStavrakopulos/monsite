<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesti√≥n de Productos</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/admin.css">
</head>

<body>
    <div class="admin-container">
        <!-- Sidebar -->
        <aside class="admin-sidebar">
            <div class="admin-logo">
                <img src="../images/logo.jpg" alt="Monsite Admin">
                <h2>Panel Admin</h2>
            </div>

            <!-- Bot√≥n toggle arriba de todo -->
            <div class="theme-toggle-container">
                <button class="theme-toggle-btn" id="themeToggle">
                    <span class="theme-slider">
                        <span class="theme-knob"></span>
                    </span>
                    <span class="theme-text">Modo Oscuro</span>
                </button>
            </div>

            <nav class="admin-nav">
                <a href="admin.html" class="nav-item">üìä Dashboard</a>
                <a href="admin-products.html" class="nav-item">üõçÔ∏è Productos</a>
                <a href="admin-categories.html" class="nav-item">üìÅ Categor√≠as</a>
                 <a href="admin-brands.html" class="nav-item">üè∑Ô∏è Marcas</a>
            </nav>

            <div class="admin-footer">
                <button onclick="logoutUser()" class="logout-btn">üö™ Cerrar Sesi√≥n</button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="admin-main">
            <header class="admin-header">
                <div class="admin-welcome">
                    <h1>Gesti√≥n de Productos</h1>
                    <p>Administra todos los productos de tu cat√°logo</p>
                </div>
                <div class="admin-actions">
                    <button class="btn-primary" onclick="showProductForm()">+ Nuevo Producto</button>
                </div>
            </header>

            <!-- Stats -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üõçÔ∏è</div>
                    <div class="stat-info">
                        <h3 id="totalProducts">0</h3>
                        <p>Total Productos</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚≠ê</div>
                    <div class="stat-info">
                        <h3 id="featuredProducts">0</h3>
                        <p>Destacados</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üì¶</div>
                    <div class="stat-info">
                        <h3 id="lowStockProducts">0</h3>
                        <p>Stock Bajo</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üè∑Ô∏è</div>
                    <div class="stat-info">
                        <h3 id="discountProducts">0</h3>
                        <p>En Descuento</p>
                    </div>
                </div>
            </div>

            <!-- Formulario de Producto -->
<div class="form-modal" id="productFormModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="productFormTitle">Nuevo Producto</h3>
            <button class="close-modal" onclick="hideProductForm()">√ó</button>
        </div>
        <form id="productForm" enctype="multipart/form-data">
            <input type="hidden" id="productId">
            
            <!-- INFORMACI√ìN B√ÅSICA -->
            <div class="form-section">
                <h4>üìã Informaci√≥n B√°sica</h4>
                <div class="form-row">
                    <div class="form-group">
                        <label>Nombre del Producto *</label>
                        <input type="text" id="productName" required placeholder="Ej: Shampoo Reparador Intenso">
                    </div>
                    <div class="form-group">
                        <label>SKU (C√≥digo √∫nico) *</label>
                        <input type="text" id="productSKU" required placeholder="Ej: SHR-001">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Categor√≠a *</label>
                        <select id="productCategory" required>
                            <option value="">Seleccionar categor√≠a</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Marca</label>
                        <select id="productBrand">
                            <option value="">Sin marca</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- PRECIOS Y DESCUENTOS -->
            <div class="form-section">
                <h4>üí∞ Precios</h4>
                <div class="form-row">
                    <div class="form-group">
                        <label>Precio Normal *</label>
                        <input type="number" id="productPrice" step="1" min="0" required placeholder="19990">
                    </div>
                    <div class="form-group">
                        <label>Tipo de Descuento</label>
                        <select id="discountType" onchange="toggleDiscountFields()">
                            <option value="none">Sin descuento</option>
                            <option value="percentage">Porcentaje %</option>
                            <option value="amount">Monto fijo $</option>
                        </select>
                    </div>
                </div>

                <div class="form-row" id="discountFields" style="display: none;">
                    <div class="form-group" id="percentageField">
                        <label>Descuento %</label>
                        <input type="number" id="productDiscountPercent" min="1" max="99" placeholder="20">
                    </div>
                    <div class="form-group" id="amountField"> 
                        <label>Descuento $</label>
                        <input type="number" id="productDiscountAmount" step="1" min="0" placeholder="5000">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Precio Final</label>
                        <input type="text" id="finalPrice" readonly placeholder="Se calcular√° autom√°ticamente" style="background: var(--admin-bg);">
                    </div>
                </div>
            </div>

            <!-- INVENTARIO -->
            <div class="form-section">
                <h4>üì¶ Inventario</h4>
                <div class="form-row">
                    <div class="form-group">
                        <label>Stock Disponible *</label>
                        <input type="number" id="productStock" required placeholder="0">
                    </div>
                    <div class="form-group">
                        <label>Stock M√≠nimo</label>
                        <input type="number" id="productMinStock" placeholder="5">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Peso/Cantidad</label>
                        <div class="quantity-container">
                            <input type="number" id="productQuantity" step="0.01" placeholder="0">
                            <select id="productUnit">
                                <option value="ml">ml</option>
                                <option value="gr">gr</option>
                                <option value="unidad">unidad</option>
                                <option value="pack">pack</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- DESCRIPCI√ìN Y DETALLES -->
            <div class="form-section">
                <h4>üìù Descripci√≥n</h4>
                <div class="form-group">
                    <label>Descripci√≥n del Producto *</label>
                    <textarea id="productDescription" required rows="4" placeholder="Describe las caracter√≠sticas y beneficios del producto..."></textarea>
                </div>

                <div class="form-group">
                    <label>Ingredientes Principales</label>
                    <textarea id="productIngredients" rows="3" placeholder="Lista los ingredientes principales..."></textarea>
                </div>

                <div class="form-group">
                    <label>Modo de Uso</label>
                    <textarea id="productUsage" rows="2" placeholder="Instrucciones de uso..."></textarea>
                </div>
            </div>

            <!-- CONFIGURACIONES ADICIONALES -->
            <div class="form-section">
                <h4>‚öôÔ∏è Configuraciones</h4>
                <div class="form-row">
                    <div class="form-group checkbox-group">
                        <input type="checkbox" id="productFeatured">
                        <label for="productFeatured">‚≠ê Producto Destacado</label>
                    </div>
                    <div class="form-group checkbox-group">
                        <input type="checkbox" id="productActive" checked>
                        <label for="productActive">‚úÖ Producto Activo</label>
                    </div>
                    <div class="form-group checkbox-group">
                        <input type="checkbox" id="productTrackStock" checked>
                        <label for="productTrackStock">üìä Controlar Stock</label>
                    </div>
                </div>
            </div>

            <!-- IMAGEN -->
            <div class="form-section">
                <h4>üñºÔ∏è Imagen del Producto</h4>
                <div class="form-group">
                    <label>Imagen del Producto</label>
                    <div class="image-upload-container">
                        <input type="file" id="productImage" accept="image/*" class="image-input">
                        <div class="image-preview" id="imagePreview">
                            <span>üì∑ Haz clic para subir imagen</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ACCIONES -->
            <div class="form-actions">
                <button type="button" class="btn-secondary" onclick="hideProductForm()">Cancelar</button>
                <button type="submit" class="btn-primary">Guardar Producto</button>
            </div>
        </form>
    </div>
</div>

            <!-- Lista de Productos -->
            <div class="products-table-container">
                <div class="table-header">
                    <h3>Todos los Productos</h3>
                    <div class="table-actions">
                        <input type="text" id="productSearch" placeholder="Buscar productos...">
                        <select id="categoryFilter">
                            <option value="">Todas las categor√≠as</option>
                        </select>
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="products-table">
                        <thead>
                            <tr>
                                <th>Imagen</th>
                                <th>Producto</th>
                                <th>SKU</th>
                                <th>Precio</th>
                                <th>Categor√≠a</th>
                                <th>Stock</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="productsTableBody">
                            <!-- Productos cargados din√°micamente -->
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <script src="../js/auth.js"></script>
    <script src="../js/admin-products.js"></script>
    <script src="../js/theme-toggle.js"></script>
</body>

</html>